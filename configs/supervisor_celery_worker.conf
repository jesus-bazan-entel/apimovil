# Configuración de Supervisor para Celery Worker
# Ubicación: /etc/supervisor/conf.d/celery_worker.conf
#
# Instrucciones:
# 1. Copia este archivo: sudo cp configs/supervisor_celery_worker.conf /etc/supervisor/conf.d/celery_worker.conf
# 2. Recarga supervisor: sudo supervisorctl reread && sudo supervisorctl update
# 3. Inicia el servicio: sudo supervisorctl start celery_worker
# 4. Ver estado: sudo supervisorctl status celery_worker

[program:celery_worker]
command=/var/www/apimovil/venv/bin/celery -A apimovil worker --loglevel=info --concurrency=4 --max-tasks-per-child=1000
directory=/var/www/apimovil
user=apimovil
group=apimovil
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/www/apimovil/logs/celery_worker.log
stderr_logfile=/var/www/apimovil/logs/celery_worker_error.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stopwaitsecs=600
stopasgroup=true
killasgroup=true
priority=998
environment=PATH="/var/www/apimovil/venv/bin",PYTHONPATH="/var/www/apimovil"
